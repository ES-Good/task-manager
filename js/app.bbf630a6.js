(function(){"use strict";var t={488:function(t,e,a){var n=a(963),s=a(252),i=a(577);const r={class:"container"},o={class:"title"};function c(t,e,a,n,c,u){const d=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("header",null,[(0,s._)("h1",o,(0,i.zw)(t.title),1)]),(0,s.Wm)(d)])}var u=a(907),d={name:"App",computed:{...(0,u.Se)(["title"])}},l=a(744);const k=(0,l.Z)(d,[["render",c]]);var f=k,m=a(201);const p={class:"home"},b={class:"task-nav"};function h(t,e,a,n,i,r){const o=(0,s.up)("AddTask"),c=(0,s.up)("CardTask");return(0,s.wg)(),(0,s.iD)("div",p,[(0,s.Wm)(o,{onAddTask:r.updateTask,path:"/tasks"},null,8,["onAddTask"]),(0,s._)("nav",b,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.allTasks,(t=>((0,s.wg)(),(0,s.j4)(c,{key:t.id,task:t},null,8,["task"])))),128))])])}var v=a(330);const T={class:"card-task"},g={key:0,class:"card-task__content-box"},_={class:"card-task__header"},w={key:1,class:"card-task__input-box"},y={class:"card-task__header"};function j(t,e,a,r,o,c){const u=(0,s.up)("WriteAndDelete"),d=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",T,[o.edit?((0,s.wg)(),(0,s.iD)("div",w,[(0,s._)("div",y,[(0,s._)("button",{class:"redactor-box__btn",onClick:e[0]||(e[0]=(...t)=>c.saveEdit&&c.saveEdit(...t))},"✔"),(0,s._)("button",{class:"redactor-box__btn",onClick:e[1]||(e[1]=(...t)=>c.cancel&&c.cancel(...t))},"✖")]),(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.inputUser=t),rows:"5",class:"card-task__input-user"},null,512),[[n.nr,o.inputUser]])])):((0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("div",_,[(0,s.Wm)(u,{onEditTask:c.editText,onDeleteEvent:t.fetchTasks,deleteTask:a.task.id,pathTask:`/tasks/${a.task.id}`},null,8,["onEditTask","onDeleteEvent","deleteTask","pathTask"])]),(0,s.Wm)(d,{class:"task-link",to:{name:"tasks",params:{id:a.task.id}}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(a.task.name),1)])),_:1},8,["to"])]))])}var x=a(667),B=a(9),C={name:"CardTask",props:{task:Object},components:{WriteAndDelete:x.Z},data(){return{inputUser:"",edit:!1}},methods:{...(0,u.nv)(["fetchTasks"]),editText(){this.edit=!0,this.inputUser=this.task.name},cancel(){this.edit=!1},async saveEdit(){this.inputUser&&(await(0,B.x)(this.inputUser,`/tasks/${this.task.id}/name`),this.fetchTasks(),this.edit=!1)}}};const D=(0,l.Z)(C,[["render",j]]);var O=D,S={name:"HomeView",components:{AddTask:v.Z,CardTask:O},computed:{...(0,u.Se)(["allTasks"])},methods:{...(0,u.nv)(["fetchTasks","addTaskBD"]),...(0,u.OI)(["renameMainTitle"]),updateTask(t){this.addTaskBD(t)}},mounted(){this.fetchTasks()},updated(){this.renameMainTitle("Задачи")}};const E=(0,l.Z)(S,[["render",h]]);var A=E;const M=[{path:"/",name:"home",component:A},{path:"/task/:id",name:"tasks",component:()=>a.e(214).then(a.bind(a,214))}],I=(0,m.p7)({history:(0,m.r5)(),routes:M});var U=I,Z=a(133),$=a(355);let P=(0,$.N8)(Z.i);async function W(t,e){let a=(0,$.iH)(P,`${e}`),n=(0,$.VF)(a),s={name:t,id:n.key,subtasks:null};return(0,$.t8)(n,s),await(0,$.t8)(n,s)}var H={state:{tasks:{}},getters:{allTasks(t){return t.tasks}},mutations:{updateTasks(t,e){t.tasks=e}},actions:{async fetchTasks(t){const e=await fetch("https://task-manager-76ccb-default-rtdb.firebaseio.com//tasks.json"),a=await e.json();t.commit("updateTasks",a)},async addTaskBD(t,e){await W(e.name,e.path);const a=await fetch("https://task-manager-76ccb-default-rtdb.firebaseio.com//tasks.json"),n=await a.json();t.commit("updateTasks",n)}}},N={state:{subtasks:{},MainTitle:"Задачи"},getters:{allSubtask(t){return t.subtasks.subtasks},mainTaskInfo(t){let e={id:t.subtasks.id,name:t.subtasks.name};return e},title(t){return t.MainTitle}},mutations:{updateSubtasks(t,e){t.subtasks=e},renameMainTitle(t,e){t.MainTitle=e}},actions:{async fetchSubTasks(t,e){const a=await fetch(`https://task-manager-76ccb-default-rtdb.firebaseio.com//tasks/${e}.json`),n=await a.json();t.commit("updateSubtasks",n)},async addSubTaskBD(t,e){await W(e.name,e.path);const a=await fetch(`https://task-manager-76ccb-default-rtdb.firebaseio.com//tasks/${e.mainTaskId}.json`),n=await a.json();t.commit("updateSubtasks",n)}}},F=(0,u.MT)({modules:{task:H,subtask:N}});(0,n.ri)(f).use(F).use(U).mount("#app")},9:function(t,e,a){a.d(e,{x:function(){return r}});var n=a(133),s=a(355);let i=(0,s.N8)(n.i);async function r(t,e){let a=(0,s.iH)(i,e);return await(0,s.t8)(a,t)}},133:function(t,e,a){a.d(e,{i:function(){return i}});var n=a(977);const s={apiKey:"AIzaSyC0GdJJPyDxFJHQrnB89ynyLm90AE3vC3g",authDomain:"task-manager-76ccb.firebaseapp.com",databaseURL:"https://task-manager-76ccb-default-rtdb.firebaseio.com",projectId:"task-manager-76ccb",storageBucket:"task-manager-76ccb.appspot.com",messagingSenderId:"668394236210",appId:"1:668394236210:web:4c702606654b7402cecf2b"},i=(0,n.ZF)(s)},330:function(t,e,a){a.d(e,{Z:function(){return l}});var n=a(252),s=a(577),i=a(963);const r={class:"block-add-task__btn-box"};function o(t,e,a,o,c,u){return(0,n.wg)(),(0,n.iD)("form",{class:(0,s.C_)(["block-add-task",{"block-add-task_active":c.activeBtn}])},[(0,n.wy)((0,n._)("input",{type:"text",class:"input block-add-task__input","onUpdate:modelValue":e[0]||(e[0]=t=>c.nameTask=t),placeholder:"Введите название задачи"},null,512),[[i.nr,c.nameTask]]),(0,n._)("div",r,[(0,n._)("button",{class:"block-add-task__btn",onClick:e[1]||(e[1]=(0,i.iM)(((...t)=>u.activeBlock&&u.activeBlock(...t)),["prevent"]))},"Добавить"),(0,n._)("button",{class:"block-add-task__btn-close",onClick:e[2]||(e[2]=(0,i.iM)(((...t)=>u.closeBlock&&u.closeBlock(...t)),["prevent"]))},"Close")])],2)}var c={name:"AddTask",data(){return{activeBtn:!1,nameTask:""}},props:{path:String},emits:["addTask"],methods:{activeBlock(){if(!this.activeBtn)return void(this.activeBtn=!0);if(!this.nameTask.length)return;let t={name:this.nameTask,path:this.path};this.$emit("addTask",t),this.closeBlock()},closeBlock(){this.activeBtn=!1,this.nameTask=""}}},u=a(744);const d=(0,u.Z)(c,[["render",o]]);var l=d},667:function(t,e,a){a.d(e,{Z:function(){return f}});var n=a(252);const s={class:"redactor-box"};function i(t,e,a,i,r,o){return(0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("button",{class:"redactor-box__btn",onClick:e[0]||(e[0]=e=>t.$emit("editTask"))},"✎"),(0,n._)("button",{class:"redactor-box__btn",onClick:e[1]||(e[1]=(...t)=>o.deleteItem&&o.deleteItem(...t))},"✖")])}var r=a(133),o=a(355);let c=(0,o.N8)(r.i);async function u(t){console.log(t);let e=(0,o.iH)(c,t);await(0,o.Od)(e)}var d={name:"WriteAndDelete",props:{pathTask:String},emit:["editTask","deleteEvent"],methods:{async deleteItem(){await u(this.pathTask),this.$emit("deleteEvent")}}},l=a(744);const k=(0,l.Z)(d,[["render",i]]);var f=k}},e={};function a(n){var s=e[n];if(void 0!==s)return s.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,n,s,i){if(!n){var r=1/0;for(d=0;d<t.length;d++){n=t[d][0],s=t[d][1],i=t[d][2];for(var o=!0,c=0;c<n.length;c++)(!1&i||r>=i)&&Object.keys(a.O).every((function(t){return a.O[t](n[c])}))?n.splice(c--,1):(o=!1,i<r&&(r=i));if(o){t.splice(d--,1);var u=s();void 0!==u&&(e=u)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[n,s,i]}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,n){return a.f[n](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+".3fdea44d.js"}}(),function(){a.miniCssF=function(t){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="task-manadger:";a.l=function(n,s,i,r){if(t[n])t[n].push(s);else{var o,c;if(void 0!==i)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var l=u[d];if(l.getAttribute("src")==n||l.getAttribute("data-webpack")==e+i){o=l;break}}o||(c=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",e+i),o.src=n),t[n]=[s];var k=function(e,a){o.onerror=o.onload=null,clearTimeout(f);var s=t[n];if(delete t[n],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((function(t){return t(a)})),e)return e(a)},f=setTimeout(k.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=k.bind(null,o.onerror),o.onload=k.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/task-manager/"}(),function(){var t={143:0};a.f.j=function(e,n){var s=a.o(t,e)?t[e]:void 0;if(0!==s)if(s)n.push(s[2]);else{var i=new Promise((function(a,n){s=t[e]=[a,n]}));n.push(s[2]=i);var r=a.p+a.u(e),o=new Error,c=function(n){if(a.o(t,e)&&(s=t[e],0!==s&&(t[e]=void 0),s)){var i=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;o.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",o.name="ChunkLoadError",o.type=i,o.request=r,s[1](o)}};a.l(r,c,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,i,r=n[0],o=n[1],c=n[2],u=0;if(r.some((function(e){return 0!==t[e]}))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(c)var d=c(a)}for(e&&e(n);u<r.length;u++)i=r[u],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},n=self["webpackChunktask_manadger"]=self["webpackChunktask_manadger"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(488)}));n=a.O(n)})();
//# sourceMappingURL=app.bbf630a6.js.map